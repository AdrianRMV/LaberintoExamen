var N=Object.defineProperty;var U=(n,i,o)=>i in n?N(n,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[i]=o;var x=(n,i,o)=>(U(n,typeof i!="symbol"?i+"":i,o),o);(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const d of s)if(d.type==="childList")for(const h of d.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function o(s){const d={};return s.integrity&&(d.integrity=s.integrity),s.referrerpolicy&&(d.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?d.credentials="include":s.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function r(s){if(s.ep)return;s.ep=!0;const d=o(s);fetch(s.href,d)}})();let q=document.getElementById("iniciar-btn"),C=document.getElementById("btn-menu"),F=document.getElementById("btn-modal-win"),G=document.getElementById("staticBackdrop"),b=document.getElementById("load"),c=null,u=null,l=null,g=null,E=null,A=[],a=[],f=3.5,J=!1,P=!1,w=0,I=0,K=document.getElementById("segundos"),W=document.getElementById("minutos"),z=document.getElementById("segundos-end"),Q=document.getElementById("minutos-end"),V=new Image,X=new Image,Y=new Image,Z=new Image,$=new Image,e1=new Image,t1=new Image,n1=new Image;new Image;let R=new Image,S=new Image,i1=new Image;new Image;let j=new Image,y=new Audio;new Audio;let B=new Audio;new Audio;let p=new Audio,l1=40,s1=30,v=null;const L=17,H=32,M=1,o1=60,a1=.1*o1;let k=0;const O=new Image;O.src="./imgs/spriteSheets.png";const m={states:{},generateState:function(n,i,o){this.states[n]||(this.states[n]={frameIndex:i,startIndex:i,endIndex:o})},getState:function(n){if(this.states[n])return this.states[n]}};m.generateState("nomove",0,0);m.generateState("down",0,3);m.generateState("up",4,7);m.generateState("left",8,11);m.generateState("right",12,15);m.generateState("dance",16,19);function _(n){u.drawImage(O,n.frameIndex*L,0,L,H,l.x,l.y,L*M,H*M),k++,k>a1&&(n.frameIndex++,k=0),n.frameIndex>n.endIndex&&(n.frameIndex=n.startIndex)}function r1(){B.src="./sounds/start.mp3",B.volume=.1,B.play(),b.style.display="block",b.style.opacity="1",setTimeout(d1,2e3)}function d1(){b.style.opacity="0",b.style.display="none",document.getElementById("myDiv").style.display="flex",document.getElementById("board").style.display="flex",m1(),c=document.getElementById("canvas"),u=c.getContext("2d"),c.width=1e3,c.height=1200,j.src="./imgs/floorSkin.png",l=new f1(l1,s1,20,37,3),g=new T(194,163,20,37),R.src="./imgs/witch.png",V.src="./imgs/front.png",X.src="./imgs/right.png",Y.src="./imgs/rightDown.png",Z.src="./imgs/rightUp.png",$.src="./imgs/back.png",e1.src="./imgs/left.png",t1.src="./imgs/leftDown.png",n1.src="./imgs/leftUp.png",S.src="./imgs/wallSkin.png",i1.src="./imgs/laberinto_vacio.png",p.src="./sounds/pasos.mp3",p.preload="auto",p.volume=.1,y.src="./sounds/ambiental_sound.mp3",y.preload="auto",y.loop=!0,y.volume=.3,y.play(),S.width=20,u1(),D()}const D=()=>{window.requestAnimationFrame(D),v=u.createPattern(j,"repeat"),u.fillStyle=v,u.fillRect(0,0,c.width,c.height),A.map(n=>{n.dibujarImage(n.x,n.y,u,S,n.w,n.h)}),(a[87]==!1||a[87]==null)&&(a[83]==!1||a[83]==null)&&(a[68]==!1||a[68]==null)&&(a[65]==!1||a[65]==null)&&_(m.getState("nomove",l.x,l.y)),u.drawImage(R,g.x,g.y),!P&&!J?c1():(u.fillStyle="rgba(0,0,0,0.5)",u.fillRect(0,0,c.width,c.height),u.fillStyle="#fff",u.font="35px Arial",u.fillText("Pause",425,500))},c1=()=>{a[68]==!0&&(l.x+=f,_(m.getState("right",l.x,l.y)),p.play()),a[83]==!0&&(l.y+=f,_(m.getState("down",l.x,l.y)),p.play()),a[65]==!0&&(l.x-=f,_(m.getState("left",l.x,l.y)),p.play()),a[87]==!0&&(l.y-=f,_(m.getState("up",l.x,l.y)),p.play()),l.se_tocan(g)&&(g.width=0,g.height=0,g.x=2e3,g.y=2e3,f=0,z.innerHTML=w,Q.innerHTML=I,F.click()),A.map(n=>{l.se_tocan(n)&&(a[87]==!0&&(l.y+=f),a[83]==!0&&(l.y-=f),a[68]==!0&&(l.x-=f),a[65]==!0&&(l.x+=f))})},e=(n,i,o,r)=>{E=new T(n,i,o,r),E.dibujarImage(n,i,u,S,o,r),A.push(E)},t=(n,i)=>i-n,u1=()=>{e(0,0,c.width,20),e(0,c.height-20,c.width,20),e(c.width-20,0,20,c.height),e(0,0,20,c.height),e(20,77,t(20,165),10),e(164,78,10,t(78,195)),e(68,134,t(68,172),10),e(68,139,10,t(139,312)),e(68,311,t(68,165),10),e(163,316,10,t(316,369)),e(70,370,t(70,360),10),e(117,193,10,t(193,252)),e(118,253,t(118,410),10),e(407,76,10,t(76,487)),e(165,188,t(165,263),10),e(209,20,10,t(20,136)),e(212,77,t(212,262),10),e(260,135,10,t(135,193)),e(260,135,t(260,311),10),e(310,79,10,t(79,139)),e(310,196,t(310,360),10),e(357,20,10,t(20,206)),e(408,309,t(408,650),10),e(647,312,10,t(312,489)),e(455,192,t(455,505),10),e(455,77,10,t(77,192)),e(505,251,t(505,555),10),e(550,136,10,t(136,255)),e(552,190,t(552,604),10),e(307,197,10,t(197,257)),e(502,75,t(502,553),10),e(501,20,10,t(20,136)),e(598,75,t(598,652),10),e(598,76,10,t(76,195)),e(601,251,t(601,843),10),e(454,255,10,t(255,314)),e(648,134,t(648,698),10),e(647,134,10,t(134,254)),e(696,191,t(696,845),10),e(696,75,10,t(75,197)),e(696,74,t(695,747),10),e(647,20,10,t(20,80)),e(747,133,t(747,798),10),e(792,20,10,t(20,138)),e(842,133,t(842,943),10),e(841,77,10,t(77,198)),e(939,249,t(939,981),10),e(889,20,10,t(20,78)),e(938,78,10,t(78,138)),e(938,193,10,t(193,256)),e(889,136,10,t(136,313)),e(501,196,10,t(196,257)),e(210,256,10,t(256,311)),e(307,256,10,t(256,311)),e(356,313,10,t(313,374)),e(259,311,10,t(311,490)),e(550,368,10,t(368,666)),e(500,428,10,t(428,548)),e(453,368,10,t(368,429)),e(598,368,10,t(368,429)),e(64,426,10,t(426,841)),e(162,484,10,t(484,898)),e(210,429,10,t(429,490)),e(210,542,10,t(542,608)),e(307,542,10,t(542,608)),e(355,483,10,t(483,608)),e(452,542,10,t(542,608)),e(113,720,10,t(720,782)),e(257,604,10,t(604,667)),e(403,603,10,t(603,725)),e(598,484,10,t(484,725)),e(502,660,10,t(660,839)),e(307,660,10,t(660,900)),e(211,660,10,t(660,842)),e(259,721,10,t(721,842)),e(695,252,10,t(252,312)),e(744,309,10,t(309,373)),e(840,308,10,t(308,608)),e(743,425,10,t(425,608)),e(743,425,10,t(425,608)),e(792,600,10,t(600,725)),e(938,659,10,t(659,724)),e(889,366,10,t(366,547)),e(937,486,10,t(486,609)),e(695,659,10,t(659,784)),e(888,721,10,t(721,784)),e(791,776,10,t(776,842)),e(743,776,10,t(776,900)),e(598,776,10,t(776,1019)),e(694,366,10,t(366,432)),e(647,601,10,t(601,664)),e(452,718,10,t(718,781)),e(356,720,10,t(720,783)),e(112,835,10,t(835,959)),e(210,893,10,t(893,959)),e(356,894,10,t(894,1016)),e(549,838,10,t(838,960)),e(646,717,10,t(717,958)),e(889,835,10,t(835,959)),e(937,951,10,t(951,1015)),e(403,776,10,t(776,901)),e(452,835,10,t(835,901)),e(452,954,10,t(954,1018)),e(501,954,10,t(954,1018)),e(307,1013,10,t(1013,1076)),e(211,1011,10,t(1011,1076)),e(64,954,10,t(954,1018)),e(162,955,10,t(955,1015)),e(113,1011,10,t(1011,1131)),e(64,1071,10,t(1071,1181)),e(355,1069,10,t(1069,1133)),e(307,1128,10,t(1128,1188)),e(500,1128,10,t(1128,1188)),e(646,1128,10,t(1128,1188)),e(549,1070,10,t(1070,1132)),e(404,954,10,t(954,1076)),e(791,425,10,t(425,548)),e(840,717,10,t(717,783)),e(695,953,10,t(953,1014)),e(646,1012,10,t(1012,1075)),e(743,1011,10,t(1011,1075)),e(889,1010,10,t(1010,1075)),e(936,1068,10,t(1068,1135)),e(792,1069,10,t(1069,1135)),e(259,951,10,t(951,1017)),e(841,307,t(841,941),10),e(743,307,t(743,795),10),e(694,366,t(694,844),10),e(890,366,t(890,942),10),e(890,424,t(890,981),10),e(842,599,t(842,941),10),e(745,424,t(745,796),10),e(602,541,t(602,699),10),e(699,484,t(699,747),10),e(456,366,t(456,605),10),e(117,1067,t(117,747),10),e(600,483,t(600,651),10),e(649,600,t(649,796),10),e(794,659,t(794,942),10),e(746,718,t(746,845),10),e(843,775,t(843,983),10),e(795,834,t(795,943),10),e(940,894,t(940,986),10),e(649,951,t(649,941),10),e(699,775,t(699,799),10),e(650,834,t(650,700),10),e(698,659,t(698,748),10),e(552,717,t(552,651),10),e(504,775,t(504,603),10),e(310,425,t(310,410),10),e(263,483,t(263,362),10),e(359,542,t(359,458),10),e(409,483,t(409,503),10),e(67,425,t(67,167),10),e(212,542,t(212,312),10),e(115,484,t(115,215),10),e(115,600,t(115,215),10),e(67,542,t(67,117),10),e(67,658,t(67,117),10),e(67,834,t(67,117),10),e(117,775,t(117,167),10),e(212,659,t(212,407),10),e(457,600,t(457,552),10),e(457,659,t(457,552),10),e(17,893,t(17,116),10),e(17,893,t(17,116),10),e(115,951,t(115,214),10),e(213,892,t(213,310),10),e(213,834,t(213,264),10),e(310,834,t(310,360),10),e(360,776,t(360,409),10),e(408,716,t(408,457),10),e(456,892,t(456,552),10),e(261,951,t(261,360),10),e(67,1010,t(67,118),10),e(214,1010,t(214,264),10),e(455,1010,t(455,505),10),e(553,1010,t(553,650),10),e(407,833,t(407,457),10),e(504,951,t(504,553),10),e(697,893,t(697,844),10),e(746,1010,t(746,893),10),e(696,1127,t(696,941),10),e(892,1068,t(892,939),10),e(795,1068,t(795,845),10),e(599,1127,t(599,650),10),e(405,1127,t(405,505),10),e(164,1127,t(164,311),10)},m1=(n=1e3)=>{window.setInterval(function(){w==60&&(w=0,I++,W.innerHTML=I,I===0&&(I=0)),K.innerHTML=w,w+=1},n)};class T{constructor(i,o,r,s){x(this,"dibujar",function(i){i.fillRect(this.x,this.y,this.w,this.h),i.strokeRect(this.x,this.y,this.w,this.h)});x(this,"dibujarImage",function(i,o,r,s,d,h){v=r.createPattern(s,"repeat"),r.beginPath(),r.fillStyle=v,r.fillRect(i,o,d,h),r.closePath()});x(this,"se_tocan",function(i){if(this.x<i.x+i.w&&this.x+this.w>i.x&&this.y<i.y+i.h&&this.y+this.h>i.y)return!0});this.x=i,this.y=o,this.w=r,this.h=s}}class f1 extends T{constructor(i,o,r,s,d){super(i,o,r,s),this.lifes=d}}document.addEventListener("keydown",({keyCode:n})=>{n==32&&(P=!P)});document.addEventListener("keydown",function({keyCode:n}){a[n]=!0});document.addEventListener("keyup",function({keyCode:n}){a[n]=!1});q.addEventListener("click",()=>{G.style.display="none",C.style.display="none",r1()});
