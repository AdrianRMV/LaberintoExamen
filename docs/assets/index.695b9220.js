var D=Object.defineProperty;var G=(n,i,s)=>i in n?D(n,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[i]=s;var S=(n,i,s)=>(G(n,typeof i!="symbol"?i+"":i,s),s);(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const d of l)if(d.type==="childList")for(const p of d.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&r(p)}).observe(document,{childList:!0,subtree:!0});function s(l){const d={};return l.integrity&&(d.integrity=l.integrity),l.referrerpolicy&&(d.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?d.credentials="include":l.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function r(l){if(l.ep)return;l.ep=!0;const d=s(l);fetch(l.href,d)}})();let J=document.getElementById("iniciar-btn"),O=document.getElementById("btn-menu"),K=document.getElementById("btn-modal-win"),U=document.getElementById("staticBackdrop"),_=document.getElementById("load"),u=null,c=null,o=null,y=null,E=null,A=[],a=[],m=3.1,W=!1,P=!1,w=0,I=0,z=document.getElementById("segundos"),Q=document.getElementById("minutos"),V=document.getElementById("segundos-end"),X=document.getElementById("minutos-end");new Image;let N=new Image,b=new Image,Y=new Image;new Image;let q=new Image,h=new Audio,T=new Audio;T.src="./sounds/completed.mp3";T.volume=.7;let L=new Audio,H=new Audio;H.src="./sounds/option_sound.mp3";H.volume=.2;let g=new Audio,Z=40,$=30,v=null;const B=17,R=32,j=1,e1=60,t1=.1*e1;let k=0;const C=new Image;C.src="./imgs/spriteSheets.png";const f={states:{},generateState:function(n,i,s){this.states[n]||(this.states[n]={frameIndex:i,startIndex:i,endIndex:s})},getState:function(n){if(this.states[n])return this.states[n]}};f.generateState("nomove",0,0);f.generateState("down",0,3);f.generateState("up",4,7);f.generateState("left",8,11);f.generateState("right",12,15);f.generateState("dance",16,19);function x(n){c.drawImage(C,n.frameIndex*B,0,B,R,o.x,o.y,B*j,R*j),k++,k>t1&&(n.frameIndex++,k=0),n.frameIndex>n.endIndex&&(n.frameIndex=n.startIndex)}function n1(){L.src="./sounds/start.mp3",L.volume=.1,L.play(),_.style.display="block",_.style.opacity="1",setTimeout(i1,2e3)}function i1(){_.style.opacity="0",_.style.display="none",document.getElementById("myDiv").style.display="flex",document.getElementById("board").style.display="flex",s1(),u=document.getElementById("canvas"),c=u.getContext("2d"),u.width=1e3,u.height=1200,q.src="./imgs/floorSkin.png",o=new a1(Z,$,20,37,3),y=new M(950,1146,20,37),N.src="./imgs/witch.png",b.src="./imgs/wallSkin.png",Y.src="./imgs/laberinto_vacio.png",g.src="./sounds/pasos.mp3",g.preload="auto",g.volume=.1,h.src="./sounds/ambiental_sound.mp3",h.preload="auto",h.loop=!0,h.volume=.3,h.play(),b.width=20,l1(),F()}const F=()=>{window.requestAnimationFrame(F),v=c.createPattern(q,"repeat"),c.fillStyle=v,c.fillRect(0,0,u.width,u.height),A.map(n=>{n.dibujarImage(n.x,n.y,c,b,n.w,n.h)}),(a[87]==!1||a[87]==null)&&(a[83]==!1||a[83]==null)&&(a[68]==!1||a[68]==null)&&(a[65]==!1||a[65]==null)&&x(f.getState("nomove",o.x,o.y)),c.drawImage(N,y.x,y.y),!P&&!W?o1():(c.fillStyle="rgba(0,0,0,0.5)",c.fillRect(0,0,u.width,u.height),c.fillStyle="#fff",c.font="35px Arial",c.fillText("Pause",425,500))},o1=()=>{a[68]==!0&&(o.x+=m,x(f.getState("right",o.x,o.y)),g.play()),a[83]==!0&&(o.y+=m,x(f.getState("down",o.x,o.y)),g.play()),a[65]==!0&&(o.x-=m,x(f.getState("left",o.x,o.y)),g.play()),a[87]==!0&&(o.y-=m,x(f.getState("up",o.x,o.y)),g.play()),o.se_tocan(y)&&(T.play(),y.width=0,y.height=0,y.x=2e3,y.y=2e3,m=0,V.innerHTML=w,X.innerHTML=I,K.click()),A.map(n=>{o.se_tocan(n)&&(a[87]==!0&&(o.y+=m),a[83]==!0&&(o.y-=m),a[68]==!0&&(o.x-=m),a[65]==!0&&(o.x+=m))})},e=(n,i,s,r)=>{E=new M(n,i,s,r),E.dibujarImage(n,i,c,b,s,r),A.push(E)},t=(n,i)=>i-n,l1=()=>{e(0,0,u.width,20),e(0,u.height-20,u.width,20),e(u.width-20,0,20,u.height),e(0,0,20,u.height),e(20,77,t(20,165),10),e(164,78,10,t(78,195)),e(68,134,t(68,172),10),e(68,139,10,t(139,312)),e(68,311,t(68,165),10),e(163,316,10,t(316,369)),e(70,370,t(70,360),10),e(117,193,10,t(193,252)),e(118,253,t(118,410),10),e(407,76,10,t(76,487)),e(165,188,t(165,263),10),e(209,20,10,t(20,136)),e(212,77,t(212,262),10),e(260,135,10,t(135,193)),e(260,135,t(260,311),10),e(310,79,10,t(79,139)),e(310,196,t(310,360),10),e(357,20,10,t(20,206)),e(408,309,t(408,650),10),e(647,312,10,t(312,489)),e(455,192,t(455,505),10),e(455,77,10,t(77,192)),e(505,251,t(505,555),10),e(550,136,10,t(136,255)),e(552,190,t(552,604),10),e(307,197,10,t(197,257)),e(502,75,t(502,553),10),e(501,20,10,t(20,136)),e(598,75,t(598,652),10),e(598,76,10,t(76,195)),e(601,251,t(601,843),10),e(454,255,10,t(255,314)),e(648,134,t(648,698),10),e(647,134,10,t(134,254)),e(696,191,t(696,845),10),e(696,75,10,t(75,197)),e(696,74,t(695,747),10),e(647,20,10,t(20,80)),e(747,133,t(747,798),10),e(792,20,10,t(20,138)),e(842,133,t(842,943),10),e(841,77,10,t(77,198)),e(939,249,t(939,981),10),e(889,20,10,t(20,78)),e(938,78,10,t(78,138)),e(938,193,10,t(193,256)),e(889,136,10,t(136,313)),e(501,196,10,t(196,257)),e(210,256,10,t(256,311)),e(307,256,10,t(256,311)),e(356,313,10,t(313,374)),e(259,311,10,t(311,490)),e(550,368,10,t(368,666)),e(500,428,10,t(428,548)),e(453,368,10,t(368,429)),e(598,368,10,t(368,429)),e(64,426,10,t(426,841)),e(162,484,10,t(484,898)),e(210,429,10,t(429,490)),e(210,542,10,t(542,608)),e(307,542,10,t(542,608)),e(355,483,10,t(483,608)),e(452,542,10,t(542,608)),e(113,720,10,t(720,782)),e(257,604,10,t(604,667)),e(403,603,10,t(603,725)),e(598,484,10,t(484,725)),e(502,660,10,t(660,839)),e(307,660,10,t(660,900)),e(211,660,10,t(660,842)),e(259,721,10,t(721,842)),e(695,252,10,t(252,312)),e(744,309,10,t(309,373)),e(840,308,10,t(308,608)),e(743,425,10,t(425,608)),e(743,425,10,t(425,608)),e(792,600,10,t(600,725)),e(938,659,10,t(659,724)),e(889,366,10,t(366,547)),e(937,486,10,t(486,609)),e(695,659,10,t(659,784)),e(888,721,10,t(721,784)),e(791,776,10,t(776,842)),e(743,776,10,t(776,900)),e(598,776,10,t(776,1019)),e(694,366,10,t(366,432)),e(647,601,10,t(601,664)),e(452,718,10,t(718,781)),e(356,720,10,t(720,783)),e(112,835,10,t(835,959)),e(210,893,10,t(893,959)),e(356,894,10,t(894,1016)),e(549,838,10,t(838,960)),e(646,717,10,t(717,958)),e(889,835,10,t(835,959)),e(937,951,10,t(951,1015)),e(403,776,10,t(776,901)),e(452,835,10,t(835,901)),e(452,954,10,t(954,1018)),e(501,954,10,t(954,1018)),e(307,1013,10,t(1013,1076)),e(211,1011,10,t(1011,1076)),e(64,954,10,t(954,1018)),e(162,955,10,t(955,1015)),e(113,1011,10,t(1011,1131)),e(64,1071,10,t(1071,1181)),e(355,1069,10,t(1069,1133)),e(307,1128,10,t(1128,1188)),e(500,1128,10,t(1128,1188)),e(646,1128,10,t(1128,1188)),e(549,1070,10,t(1070,1132)),e(404,954,10,t(954,1076)),e(791,425,10,t(425,548)),e(840,717,10,t(717,783)),e(695,953,10,t(953,1014)),e(646,1012,10,t(1012,1075)),e(743,1011,10,t(1011,1075)),e(889,1010,10,t(1010,1075)),e(936,1068,10,t(1068,1135)),e(792,1069,10,t(1069,1135)),e(259,951,10,t(951,1017)),e(841,307,t(841,941),10),e(743,307,t(743,795),10),e(694,366,t(694,844),10),e(890,366,t(890,942),10),e(890,424,t(890,981),10),e(842,599,t(842,941),10),e(745,424,t(745,796),10),e(602,541,t(602,699),10),e(699,484,t(699,747),10),e(456,366,t(456,605),10),e(117,1067,t(117,747),10),e(600,483,t(600,651),10),e(649,600,t(649,796),10),e(794,659,t(794,942),10),e(746,718,t(746,845),10),e(843,775,t(843,983),10),e(795,834,t(795,943),10),e(940,894,t(940,986),10),e(649,951,t(649,941),10),e(699,775,t(699,799),10),e(650,834,t(650,700),10),e(698,659,t(698,748),10),e(552,717,t(552,651),10),e(504,775,t(504,603),10),e(310,425,t(310,410),10),e(263,483,t(263,362),10),e(359,542,t(359,458),10),e(409,483,t(409,503),10),e(67,425,t(67,167),10),e(212,542,t(212,312),10),e(115,484,t(115,215),10),e(115,600,t(115,215),10),e(67,542,t(67,117),10),e(67,658,t(67,117),10),e(67,834,t(67,117),10),e(117,775,t(117,167),10),e(212,659,t(212,407),10),e(457,600,t(457,552),10),e(457,659,t(457,552),10),e(17,893,t(17,116),10),e(17,893,t(17,116),10),e(115,951,t(115,214),10),e(213,892,t(213,310),10),e(213,834,t(213,264),10),e(310,834,t(310,360),10),e(360,776,t(360,409),10),e(408,716,t(408,457),10),e(456,892,t(456,552),10),e(261,951,t(261,360),10),e(67,1010,t(67,118),10),e(214,1010,t(214,264),10),e(455,1010,t(455,505),10),e(553,1010,t(553,650),10),e(407,833,t(407,457),10),e(504,951,t(504,553),10),e(697,893,t(697,844),10),e(746,1010,t(746,893),10),e(696,1127,t(696,941),10),e(892,1068,t(892,939),10),e(795,1068,t(795,845),10),e(599,1127,t(599,650),10),e(405,1127,t(405,505),10),e(164,1127,t(164,311),10)},s1=(n=1e3)=>{window.setInterval(function(){w==60&&(w=0,I++,Q.innerHTML=I,I===0&&(I=0)),z.innerHTML=w,w+=1},n)};class M{constructor(i,s,r,l){S(this,"dibujar",function(i){i.fillRect(this.x,this.y,this.w,this.h),i.strokeRect(this.x,this.y,this.w,this.h)});S(this,"dibujarImage",function(i,s,r,l,d,p){v=r.createPattern(l,"repeat"),r.beginPath(),r.fillStyle=v,r.fillRect(i,s,d,p),r.closePath()});S(this,"se_tocan",function(i){if(this.x<i.x+i.w&&this.x+this.w>i.x&&this.y<i.y+i.h&&this.y+this.h>i.y)return!0});this.x=i,this.y=s,this.w=r,this.h=l}}class a1 extends M{constructor(i,s,r,l,d){super(i,s,r,l),this.lifes=d}}document.addEventListener("keydown",({keyCode:n})=>{n==32&&(P=!P)});document.addEventListener("keydown",function({keyCode:n}){a[n]=!0});document.addEventListener("keyup",function({keyCode:n}){a[n]=!1});J.addEventListener("click",()=>{U.style.display="none",O.style.display="none",n1()});O.addEventListener("click",()=>{H.play()});
